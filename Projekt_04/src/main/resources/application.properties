# ===================================================================
# DATASOURCE & H2 SETTINGS
# ===================================================================
spring.datasource.url=jdbc:h2:file:c:/tmp/db/atruvia_northwind;AUTO_SERVER=TRUE;DB_CLOSE_DELAY=-1
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true

# ===================================================================
# JPA / HIBERNATE SETTINGS
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# L2 Cache & Query Cache aktivieren
spring.jpa.properties.hibernate.cache.use_second_level_cache=true
spring.jpa.properties.hibernate.cache.use_query_cache=true

# Definition der JCache Region Factory
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.internal.JCacheRegionFactory

# Pfad zur ehcache.xml (muss in src/main/resources liegen)
# Hibernate 6 nutzt oft diesen Key für die URI:
spring.jpa.properties.hibernate.javax.cache.uri=classpath:ehcache.xml

# Falls Hibernate den Provider nicht automatisch findet:
spring.jpa.properties.hibernate.javax.cache.provider=org.ehcache.jsr107.EhcacheCachingProvider
spring.jpa.properties.jakarta.persistence.cache.uri=classpath:ehcache.xml
# ===================================================================
# MONITORING & STATISTICS
# ===================================================================
# Aktiviert die interne Erfassung von Cache-Treffern/Fehlschlägen
spring.jpa.properties.hibernate.generate_statistics=true

# Loggt die Statistik-Zusammenfassung nach jeder Session/Transaktion
logging.level.org.hibernate.stat=DEBUG

# Optional: SQL-Parameter im Log sichtbar machen
logging.level.org.hibernate.orm.jdbc.bind=TRACE